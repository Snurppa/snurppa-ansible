---

- name: Install homebrew packages
  homebrew: name={{ brew_packages }} state=present
  tags: brew

- name: Install homebrew with latest versions
  homebrew: name={{ brew_latest_packages }} state=latest
  tags:
   - brew
   - brew-latest

- name: Install caskroom/versions
  command: brew tap homebrew/cask-versions
  tags:
    - brew
    - brew-versions

- name: Install homebrew-cask packages
  command: brew install --quiet --cask {{ brew_casks | join(' ') }}
  tags:
    - brew
    - brew-cask

- name: Install hombrew-services
  command: brew tap homebrew/services
  tags:
    - brew
    - brew-services

#- name: Start services via homebrew-services
#  command: brew services start {{item}}
#  with_items: "{{ brew_services }}"
#  register: services_start
#  changed_when: '"already started" not in services_start.stdout'
#  when: brew_services is defined and brew_services
#  tags:
#    - brew
#    - brew-services
